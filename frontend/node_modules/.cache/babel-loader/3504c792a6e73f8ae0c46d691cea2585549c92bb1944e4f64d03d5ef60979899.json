{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import QRCode from'react-qr-code';import QRScanner from'./QRScanner';import StudentAttendance from'./StudentAttendance';import StudentSummary from'./StudentSummary';import'./Dashboard.css';import{API_BASE}from'../config';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Dashboard(_ref){let{user,setUser}=_ref;const[sessionId,setSessionId]=useState(null);const[token,setToken]=useState('');const[showQR,setShowQR]=useState(false);const[activeView,setActiveView]=useState('dashboard');const[classId,setClassId]=useState(null);const[classes,setClasses]=useState([]);const[loadingClasses,setLoadingClasses]=useState(false);const[showManualInfo,setShowManualInfo]=useState(true);const logout=()=>{setUser(null);};const createDefaultClass=React.useCallback(async()=>{try{const response=await axios.post(\"\".concat(API_BASE,\"/api/classes\"),{class_name:\"\".concat(user.name,\"'s Class\"),teacher_id:user.id});setClasses([response.data]);setClassId(response.data.id);}catch(err){alert('Failed to create default class. Please create a class first.');}},[user.id,user.name]);const loadClasses=React.useCallback(async()=>{setLoadingClasses(true);try{const response=await axios.get(\"\".concat(API_BASE,\"/api/classes?teacher_id=\").concat(user.id));if(response.data&&response.data.length>0){setClasses(response.data);setClassId(response.data[0].id);}else{// Auto-create a default class for the teacher\nawait createDefaultClass();}}catch(err){console.error('Error loading classes:',err);}finally{setLoadingClasses(false);}},[user.id,createDefaultClass]);// Load classes for teacher on mount\nuseEffect(()=>{if((user===null||user===void 0?void 0:user.role)==='teacher'){loadClasses();}},[user,loadClasses]);const generateQR=async()=>{if(!classId){alert('Please select a class first or create one.');return;}try{const code=\"CLASS-\".concat(user.id,\"-\").concat(Date.now());const response=await axios.post(\"\".concat(API_BASE,\"/api/create-session\"),{class_id:classId,qr_code:code});// Use the session_id to get rotating tokens\nif(response.data.session_id){setSessionId(response.data.session_id);setShowQR(true);}}catch(err){var _err$response,_err$response$data;let errorMessage='Failed to generate QR code';if(err.code==='ERR_NETWORK'||err.message.includes('Network Error')){errorMessage=\"Cannot connect to server. Please make sure the backend server is running on \".concat(API_BASE);}else if((_err$response=err.response)!==null&&_err$response!==void 0&&(_err$response$data=_err$response.data)!==null&&_err$response$data!==void 0&&_err$response$data.error){errorMessage=err.response.data.error;// If class doesn't exist, try to create one\nif(errorMessage.includes('does not exist')){await createDefaultClass();errorMessage+='\\n\\nA default class has been created. Please try again.';}}else{errorMessage=\"Failed to generate QR code: \".concat(err.message);}alert(errorMessage);}};// Poll rotating token when a session is active (7 seconds window)\nuseEffect(()=>{if(!sessionId)return;let timer=null;const fetchToken=async()=>{try{const r=await axios.get(\"\".concat(API_BASE,\"/api/qr/\").concat(sessionId,\"/current\"));setToken(r.data.token);// refresh faster than server window size (7 seconds) - refresh every 5 seconds\nconst ws=r.data.window_seconds||7;timer=setTimeout(fetchToken,Math.max(3000,ws*700));// 70% of window time\n}catch(e){// ignore transient errors, but log for debugging\nconsole.error('Error fetching token:',e);}};fetchToken();return()=>{if(timer)clearTimeout(timer);};},[sessionId]);const renderDashboardContent=()=>{if(activeView==='qr'&&user.role==='teacher'){return/*#__PURE__*/_jsxs(\"div\",{className:\"feature-content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Generate QR Code\"}),loadingClasses?/*#__PURE__*/_jsx(\"p\",{children:\"Loading classes...\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[classes.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'5px'},children:\"Select Class:\"}),/*#__PURE__*/_jsx(\"select\",{value:classId||'',onChange:e=>setClassId(Number(e.target.value)),style:{padding:'8px',width:'300px',fontSize:'14px'},children:classes.map(cls=>/*#__PURE__*/_jsx(\"option\",{value:cls.id,children:cls.class_name},cls.id))})]}),/*#__PURE__*/_jsx(\"button\",{onClick:generateQR,className:\"action-btn\",disabled:!classId,children:\"Generate New QR Code\"})]}),showQR&&sessionId&&token&&/*#__PURE__*/_jsxs(\"div\",{className:\"qr-display\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Show this on Projector\"}),/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'#fff3cd',border:'2px solid #ffc107',borderRadius:'8px',padding:'15px',marginBottom:'20px',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"strong\",{style:{color:'#856404',fontSize:'16px'},children:\"\\u26A0\\uFE0F SECURITY WARNING\"}),/*#__PURE__*/_jsxs(\"p\",{style:{color:'#856404',marginTop:'10px',fontSize:'14px'},children:[\"Do NOT share this QR code via video call, screenshot, or photo.\",/*#__PURE__*/_jsx(\"br\",{}),\"Only students physically present in the classroom can scan this code.\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"qr-code-container\",children:/*#__PURE__*/_jsx(QRCode,{value:token,size:256})}),/*#__PURE__*/_jsx(\"p\",{className:\"qr-text\",style:{fontFamily:'monospace',wordBreak:'break-all'},children:token}),/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:'12px',color:'#666',marginTop:'10px'},children:[\"Session ID: \",sessionId,\" | Token refreshes every 7 seconds\"]}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'11px',color:'#d32f2f',marginTop:'5px',fontWeight:'bold'},children:\"\\uD83D\\uDD12 Security: GPS verification required. Remote scanning is blocked.\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',justifyContent:'center',marginTop:'15px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{var _navigator$clipboard;if((_navigator$clipboard=navigator.clipboard)!==null&&_navigator$clipboard!==void 0&&_navigator$clipboard.writeText){navigator.clipboard.writeText(token).then(()=>alert('Token copied to clipboard. Share only with students in class.')).catch(()=>alert('Unable to copy token. Please copy manually.'));}else{alert('Copy not supported on this browser. Please copy manually.');}},style:{padding:'10px 18px',backgroundColor:'#4CAF50',color:'#fff',border:'none',borderRadius:'5px',cursor:'pointer',fontWeight:'bold'},children:\"Copy Token\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowManualInfo(prev=>!prev),style:{padding:'10px 18px',backgroundColor:'#2196F3',color:'#fff',border:'none',borderRadius:'5px',cursor:'pointer',fontWeight:'bold'},children:[showManualInfo?'Hide':'Show',\" Manual Entry Info\"]})]}),showManualInfo&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'20px',backgroundColor:'#eef9ff',border:'1px solid #90caf9',borderRadius:'8px',padding:'15px',color:'#0d47a1',textAlign:'left'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{marginTop:0},children:\"Manual Token Entry Instructions\"}),/*#__PURE__*/_jsxs(\"ul\",{style:{paddingLeft:'18px',marginBottom:0},children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"Tell students they can tap \",/*#__PURE__*/_jsx(\"strong\",{children:\"\\u2328\\uFE0F Enter Token\"}),\" on their phones if the camera is not working.\"]}),/*#__PURE__*/_jsx(\"li\",{children:\"Read or display the token above so students can type it exactly (including dashes).\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Manual entry still requires GPS/location verification, so only students in the classroom will succeed.\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Tokens refresh every few seconds\\u2014if someone gets an error, ask them to enter the newest token.\"})]})]})]}),showQR&&sessionId&&!token&&/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px',color:'#666'},children:\"Loading QR token...\"})]});}if(activeView==='manual'&&user.role==='teacher'){return/*#__PURE__*/_jsxs(\"div\",{className:\"feature-content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Manual Token Entry (Teacher Guide)\"}),!showQR||!sessionId?/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'#fff3cd',border:'1px solid #ffc107',borderRadius:'8px',padding:'15px',marginBottom:'20px',color:'#856404'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Generate a QR (and token) first.\"}),\" The manual entry method uses the same rotating token. Click \",/*#__PURE__*/_jsx(\"strong\",{children:\"GENERATE QR\"}),\" above, start a session, then return here to share the token with students.\"]}):null,showQR&&sessionId&&token&&/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'#eef9ff',border:'1px solid #90caf9',borderRadius:'8px',padding:'18px',marginBottom:'20px',color:'#0d47a1'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:0},children:\"Current Token\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontFamily:'monospace',fontSize:'18px',wordBreak:'break-all'},children:token}),/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:'12px',color:'#0d47a1'},children:[\"Session ID: \",sessionId,\" | Refreshes every 7 seconds\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',marginTop:'10px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{var _navigator$clipboard2;if((_navigator$clipboard2=navigator.clipboard)!==null&&_navigator$clipboard2!==void 0&&_navigator$clipboard2.writeText){navigator.clipboard.writeText(token).then(()=>alert('Token copied. Share only with students in class (manual entry still requires GPS).')).catch(()=>alert('Unable to copy. Please copy manually.'));}else{alert('Copy not supported on this browser. Copy manually instead.');}},style:{padding:'10px 18px',backgroundColor:'#4CAF50',color:'#fff',border:'none',borderRadius:'5px',cursor:'pointer',fontWeight:'bold'},children:\"Copy Token\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowManualInfo(prev=>!prev),style:{padding:'10px 18px',backgroundColor:'#2196F3',color:'#fff',border:'none',borderRadius:'5px',cursor:'pointer',fontWeight:'bold'},children:[showManualInfo?'Hide':'Show',\" Student Instructions\"]})]})]}),showManualInfo&&/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'#f8f9fa',border:'1px solid #ddd',borderRadius:'8px',padding:'18px',lineHeight:1.6},children:[/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:0},children:\"How to Use Manual Entry\"}),/*#__PURE__*/_jsxs(\"ol\",{style:{paddingLeft:'18px'},children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"Show the QR on the projector \",/*#__PURE__*/_jsx(\"strong\",{children:\"and\"}),\" read out the token text beneath it.\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Tell students with camera issues to tap \",/*#__PURE__*/_jsx(\"strong\",{children:\"\\u2328\\uFE0F Enter Token\"}),\" on their phones.\"]}),/*#__PURE__*/_jsx(\"li\",{children:\"They must type the token exactly (including dashes) before it refreshes.\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Manual entry still enforces GPS/device/IP restrictions, so only students in your classroom will succeed.\"}),/*#__PURE__*/_jsx(\"li\",{children:\"If a student gets an \\u201Cinvalid/expired token\\u201D error, read the newest token on screen.\"})]}),/*#__PURE__*/_jsxs(\"p\",{style:{marginTop:'10px',color:'#555'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Need to run without QR?\"}),\" You can keep this page open and read out the new token every time it changes. Students can keep using manual entry without needing the camera.\"]})]})]});}if(activeView==='scan'&&user.role==='student'){return/*#__PURE__*/_jsx(QRScanner,{user:user});}if(activeView==='attendance'&&user.role==='student'){return/*#__PURE__*/_jsx(StudentAttendance,{user:user});}return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-welcome\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Welcome to Attendance Management System\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Select an option from the menu to get started\"}),user.role==='student'&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:20},children:[/*#__PURE__*/_jsx(\"h3\",{style:{color:'#333',marginBottom:10},children:\"Your Subjects Summary\"}),/*#__PURE__*/_jsx(StudentSummary,{user:user})]})]});};return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-container\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"dashboard-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header-left\",children:/*#__PURE__*/_jsx(\"div\",{className:\"logo\",children:\"JSSATE BENGALURU\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"header-right\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"user-profile\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-pic\",children:user.name.charAt(0).toUpperCase()}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-name\",children:user.name}),user.role==='student'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-id\",children:user.student_id||'Student ID'}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-course\",children:user.course||'Course'}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-section\",children:user.section||'Section'})]}),user.role==='teacher'&&/*#__PURE__*/_jsx(\"div\",{className:\"profile-role\",children:\"Teacher\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,className:\"logout-btn\",children:\"Logout\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-divider\"}),/*#__PURE__*/_jsxs(\"main\",{className:\"dashboard-main\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-grid\",children:user.role==='student'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"dashboard-btn btn-1\",onClick:()=>setActiveView('scan'),children:\"SCAN QR CODE\"}),/*#__PURE__*/_jsx(\"button\",{className:\"dashboard-btn btn-2\",onClick:()=>setActiveView('attendance'),children:\"MY ATTENDANCE\"}),/*#__PURE__*/_jsx(\"button\",{className:\"dashboard-btn btn-3\",onClick:()=>setActiveView('dashboard'),children:\"DASHBOARD\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"dashboard-btn btn-1\",onClick:()=>setActiveView('qr'),children:\"GENERATE QR\"}),/*#__PURE__*/_jsx(\"button\",{className:\"dashboard-btn btn-2\",onClick:()=>setActiveView('manual'),children:\"MANUAL ENTRY\"}),/*#__PURE__*/_jsx(\"button\",{className:\"dashboard-btn btn-3\",onClick:()=>setActiveView('report'),children:\"VIEW REPORTS\"}),/*#__PURE__*/_jsx(\"button\",{className:\"dashboard-btn btn-4\",onClick:()=>setActiveView('dashboard'),children:\"DASHBOARD\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"main-content\",children:renderDashboardContent()})]}),user.role==='student'&&/*#__PURE__*/_jsx(\"button\",{className:\"fab-scan\",onClick:()=>setActiveView('scan'),children:\"\\uD83D\\uDCF7 Scan QR\"}),/*#__PURE__*/_jsx(\"footer\",{className:\"dashboard-footer\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"footer-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"footer-left\",children:\"\\xA9 Copyright 2025. All Rights Reserved\"}),/*#__PURE__*/_jsx(\"div\",{className:\"footer-right\",children:\"admissions@system.com | 080-28611702\"})]})})]});}","map":{"version":3,"names":["React","useState","useEffect","axios","QRCode","QRScanner","StudentAttendance","StudentSummary","API_BASE","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Dashboard","_ref","user","setUser","sessionId","setSessionId","token","setToken","showQR","setShowQR","activeView","setActiveView","classId","setClassId","classes","setClasses","loadingClasses","setLoadingClasses","showManualInfo","setShowManualInfo","logout","createDefaultClass","useCallback","response","post","concat","class_name","name","teacher_id","id","data","err","alert","loadClasses","get","length","console","error","role","generateQR","code","Date","now","class_id","qr_code","session_id","_err$response","_err$response$data","errorMessage","message","includes","timer","fetchToken","r","ws","window_seconds","setTimeout","Math","max","e","clearTimeout","renderDashboardContent","className","children","style","marginBottom","display","value","onChange","Number","target","padding","width","fontSize","map","cls","onClick","disabled","backgroundColor","border","borderRadius","textAlign","color","marginTop","size","fontFamily","wordBreak","fontWeight","gap","justifyContent","_navigator$clipboard","navigator","clipboard","writeText","then","catch","cursor","prev","paddingLeft","_navigator$clipboard2","lineHeight","charAt","toUpperCase","student_id","course","section"],"sources":["C:/Users/LENOVO/Downloads/attendance-system-qr/frontend/src/pages/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport QRCode from 'react-qr-code';\r\nimport QRScanner from './QRScanner';\r\nimport StudentAttendance from './StudentAttendance';\r\nimport StudentSummary from './StudentSummary';\r\nimport './Dashboard.css';\r\nimport { API_BASE } from '../config';\r\n\r\nexport default function Dashboard({ user, setUser }) {\r\n  const [sessionId, setSessionId] = useState(null);\r\n  const [token, setToken] = useState('');\r\n  const [showQR, setShowQR] = useState(false);\r\n  const [activeView, setActiveView] = useState('dashboard');\r\n  const [classId, setClassId] = useState(null);\r\n  const [classes, setClasses] = useState([]);\r\n  const [loadingClasses, setLoadingClasses] = useState(false);\r\n  const [showManualInfo, setShowManualInfo] = useState(true);\r\n\r\n  const logout = () => {\r\n    setUser(null);\r\n  };\r\n\r\n  const createDefaultClass = React.useCallback(async () => {\r\n    try {\r\n      const response = await axios.post(`${API_BASE}/api/classes`, {\r\n        class_name: `${user.name}'s Class`,\r\n        teacher_id: user.id\r\n      });\r\n      setClasses([response.data]);\r\n      setClassId(response.data.id);\r\n    } catch (err) {\r\n      alert('Failed to create default class. Please create a class first.');\r\n    }\r\n  }, [user.id, user.name]);\r\n\r\n  const loadClasses = React.useCallback(async () => {\r\n    setLoadingClasses(true);\r\n    try {\r\n      const response = await axios.get(`${API_BASE}/api/classes?teacher_id=${user.id}`);\r\n      if (response.data && response.data.length > 0) {\r\n        setClasses(response.data);\r\n        setClassId(response.data[0].id);\r\n      } else {\r\n        // Auto-create a default class for the teacher\r\n        await createDefaultClass();\r\n      }\r\n    } catch (err) {\r\n      console.error('Error loading classes:', err);\r\n    } finally {\r\n      setLoadingClasses(false);\r\n    }\r\n  }, [user.id, createDefaultClass]);\r\n\r\n  // Load classes for teacher on mount\r\n  useEffect(() => {\r\n    if (user?.role === 'teacher') {\r\n      loadClasses();\r\n    }\r\n  }, [user, loadClasses]);\r\n\r\n  const generateQR = async () => {\r\n    if (!classId) {\r\n      alert('Please select a class first or create one.');\r\n      return;\r\n    }\r\n    try {\r\n      const code = `CLASS-${user.id}-${Date.now()}`;\r\n      const response = await axios.post(`${API_BASE}/api/create-session`, {\r\n        class_id: classId,\r\n        qr_code: code\r\n      });\r\n      // Use the session_id to get rotating tokens\r\n      if (response.data.session_id) {\r\n        setSessionId(response.data.session_id);\r\n        setShowQR(true);\r\n      }\r\n    } catch (err) {\r\n      let errorMessage = 'Failed to generate QR code';\r\n      if (err.code === 'ERR_NETWORK' || err.message.includes('Network Error')) {\r\n        errorMessage = `Cannot connect to server. Please make sure the backend server is running on ${API_BASE}`;\r\n      } else if (err.response?.data?.error) {\r\n        errorMessage = err.response.data.error;\r\n        // If class doesn't exist, try to create one\r\n        if (errorMessage.includes('does not exist')) {\r\n          await createDefaultClass();\r\n          errorMessage += '\\n\\nA default class has been created. Please try again.';\r\n        }\r\n      } else {\r\n        errorMessage = `Failed to generate QR code: ${err.message}`;\r\n      }\r\n      alert(errorMessage);\r\n    }\r\n  };\r\n\r\n  // Poll rotating token when a session is active (7 seconds window)\r\n  useEffect(() => {\r\n    if (!sessionId) return;\r\n    let timer = null;\r\n    const fetchToken = async () => {\r\n      try {\r\n        const r = await axios.get(`${API_BASE}/api/qr/${sessionId}/current`);\r\n        setToken(r.data.token);\r\n        // refresh faster than server window size (7 seconds) - refresh every 5 seconds\r\n        const ws = (r.data.window_seconds || 7);\r\n        timer = setTimeout(fetchToken, Math.max(3000, ws * 700)); // 70% of window time\r\n      } catch (e) {\r\n        // ignore transient errors, but log for debugging\r\n        console.error('Error fetching token:', e);\r\n      }\r\n    };\r\n    fetchToken();\r\n    return () => { if (timer) clearTimeout(timer); };\r\n  }, [sessionId]);\r\n\r\n  const renderDashboardContent = () => {\r\n    if (activeView === 'qr' && user.role === 'teacher') {\r\n      return (\r\n        <div className=\"feature-content\">\r\n          <h2>Generate QR Code</h2>\r\n          {loadingClasses ? (\r\n            <p>Loading classes...</p>\r\n          ) : (\r\n            <>\r\n              {classes.length > 0 && (\r\n                <div style={{marginBottom: '15px'}}>\r\n                  <label style={{display: 'block', marginBottom: '5px'}}>Select Class:</label>\r\n                  <select \r\n                    value={classId || ''} \r\n                    onChange={(e) => setClassId(Number(e.target.value))}\r\n                    style={{padding: '8px', width: '300px', fontSize: '14px'}}\r\n                  >\r\n                    {classes.map(cls => (\r\n                      <option key={cls.id} value={cls.id}>{cls.class_name}</option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n              )}\r\n              <button onClick={generateQR} className=\"action-btn\" disabled={!classId}>\r\n                Generate New QR Code\r\n              </button>\r\n            </>\r\n          )}\r\n          {showQR && sessionId && token && (\r\n            <div className=\"qr-display\">\r\n              <h3>Show this on Projector</h3>\r\n              <div style={{\r\n                backgroundColor: '#fff3cd',\r\n                border: '2px solid #ffc107',\r\n                borderRadius: '8px',\r\n                padding: '15px',\r\n                marginBottom: '20px',\r\n                textAlign: 'center'\r\n              }}>\r\n                <strong style={{color: '#856404', fontSize: '16px'}}>‚ö†Ô∏è SECURITY WARNING</strong>\r\n                <p style={{color: '#856404', marginTop: '10px', fontSize: '14px'}}>\r\n                  Do NOT share this QR code via video call, screenshot, or photo.<br/>\r\n                  Only students physically present in the classroom can scan this code.\r\n                </p>\r\n              </div>\r\n              <div className=\"qr-code-container\">\r\n                <QRCode value={token} size={256} />\r\n              </div>\r\n              <p className=\"qr-text\" style={{fontFamily: 'monospace', wordBreak: 'break-all'}}>{token}</p>\r\n              <p style={{fontSize: '12px', color: '#666', marginTop: '10px'}}>\r\n                Session ID: {sessionId} | Token refreshes every 7 seconds\r\n              </p>\r\n              <p style={{fontSize: '11px', color: '#d32f2f', marginTop: '5px', fontWeight: 'bold'}}>\r\n                üîí Security: GPS verification required. Remote scanning is blocked.\r\n              </p>\r\n              <div style={{display: 'flex', gap: '10px', justifyContent: 'center', marginTop: '15px'}}>\r\n                <button\r\n                  onClick={() => {\r\n                    if (navigator.clipboard?.writeText) {\r\n                      navigator.clipboard.writeText(token)\r\n                        .then(() => alert('Token copied to clipboard. Share only with students in class.'))\r\n                        .catch(() => alert('Unable to copy token. Please copy manually.'));\r\n                    } else {\r\n                      alert('Copy not supported on this browser. Please copy manually.');\r\n                    }\r\n                  }}\r\n                  style={{\r\n                    padding: '10px 18px',\r\n                    backgroundColor: '#4CAF50',\r\n                    color: '#fff',\r\n                    border: 'none',\r\n                    borderRadius: '5px',\r\n                    cursor: 'pointer',\r\n                    fontWeight: 'bold'\r\n                  }}\r\n                >\r\n                  Copy Token\r\n                </button>\r\n                <button\r\n                  onClick={() => setShowManualInfo(prev => !prev)}\r\n                  style={{\r\n                    padding: '10px 18px',\r\n                    backgroundColor: '#2196F3',\r\n                    color: '#fff',\r\n                    border: 'none',\r\n                    borderRadius: '5px',\r\n                    cursor: 'pointer',\r\n                    fontWeight: 'bold'\r\n                  }}\r\n                >\r\n                  {showManualInfo ? 'Hide' : 'Show'} Manual Entry Info\r\n                </button>\r\n              </div>\r\n              {showManualInfo && (\r\n                <div style={{\r\n                  marginTop: '20px',\r\n                  backgroundColor: '#eef9ff',\r\n                  border: '1px solid #90caf9',\r\n                  borderRadius: '8px',\r\n                  padding: '15px',\r\n                  color: '#0d47a1',\r\n                  textAlign: 'left'\r\n                }}>\r\n                  <h4 style={{marginTop: 0}}>Manual Token Entry Instructions</h4>\r\n                  <ul style={{paddingLeft: '18px', marginBottom: 0}}>\r\n                    <li>Tell students they can tap <strong>‚å®Ô∏è Enter Token</strong> on their phones if the camera is not working.</li>\r\n                    <li>Read or display the token above so students can type it exactly (including dashes).</li>\r\n                    <li>Manual entry still requires GPS/location verification, so only students in the classroom will succeed.</li>\r\n                    <li>Tokens refresh every few seconds‚Äîif someone gets an error, ask them to enter the newest token.</li>\r\n                  </ul>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n          {showQR && sessionId && !token && (\r\n            <div style={{padding: '20px', color: '#666'}}>Loading QR token...</div>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (activeView === 'manual' && user.role === 'teacher') {\r\n      return (\r\n        <div className=\"feature-content\">\r\n          <h2>Manual Token Entry (Teacher Guide)</h2>\r\n          {!showQR || !sessionId ? (\r\n            <div style={{\r\n              backgroundColor: '#fff3cd',\r\n              border: '1px solid #ffc107',\r\n              borderRadius: '8px',\r\n              padding: '15px',\r\n              marginBottom: '20px',\r\n              color: '#856404'\r\n            }}>\r\n              <strong>Generate a QR (and token) first.</strong> The manual entry method uses the same rotating token. \r\n              Click <strong>GENERATE QR</strong> above, start a session, then return here to share the token with students.\r\n            </div>\r\n          ) : null}\r\n\r\n          {showQR && sessionId && token && (\r\n            <div style={{\r\n              backgroundColor: '#eef9ff',\r\n              border: '1px solid #90caf9',\r\n              borderRadius: '8px',\r\n              padding: '18px',\r\n              marginBottom: '20px',\r\n              color: '#0d47a1'\r\n            }}>\r\n              <h3 style={{marginTop: 0}}>Current Token</h3>\r\n              <p style={{fontFamily: 'monospace', fontSize: '18px', wordBreak: 'break-all'}}>{token}</p>\r\n              <p style={{fontSize: '12px', color: '#0d47a1'}}>Session ID: {sessionId} | Refreshes every 7 seconds</p>\r\n              <div style={{display: 'flex', gap: '10px', marginTop: '10px'}}>\r\n                <button\r\n                  onClick={() => {\r\n                    if (navigator.clipboard?.writeText) {\r\n                      navigator.clipboard.writeText(token)\r\n                        .then(() => alert('Token copied. Share only with students in class (manual entry still requires GPS).'))\r\n                        .catch(() => alert('Unable to copy. Please copy manually.'));\r\n                    } else {\r\n                      alert('Copy not supported on this browser. Copy manually instead.');\r\n                    }\r\n                  }}\r\n                  style={{\r\n                    padding: '10px 18px',\r\n                    backgroundColor: '#4CAF50',\r\n                    color: '#fff',\r\n                    border: 'none',\r\n                    borderRadius: '5px',\r\n                    cursor: 'pointer',\r\n                    fontWeight: 'bold'\r\n                  }}\r\n                >\r\n                  Copy Token\r\n                </button>\r\n                <button\r\n                  onClick={() => setShowManualInfo(prev => !prev)}\r\n                  style={{\r\n                    padding: '10px 18px',\r\n                    backgroundColor: '#2196F3',\r\n                    color: '#fff',\r\n                    border: 'none',\r\n                    borderRadius: '5px',\r\n                    cursor: 'pointer',\r\n                    fontWeight: 'bold'\r\n                  }}\r\n                >\r\n                  {showManualInfo ? 'Hide' : 'Show'} Student Instructions\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {showManualInfo && (\r\n            <div style={{\r\n              backgroundColor: '#f8f9fa',\r\n              border: '1px solid #ddd',\r\n              borderRadius: '8px',\r\n              padding: '18px',\r\n              lineHeight: 1.6\r\n            }}>\r\n              <h3 style={{marginTop: 0}}>How to Use Manual Entry</h3>\r\n              <ol style={{paddingLeft: '18px'}}>\r\n                <li>Show the QR on the projector <strong>and</strong> read out the token text beneath it.</li>\r\n                <li>Tell students with camera issues to tap <strong>‚å®Ô∏è Enter Token</strong> on their phones.</li>\r\n                <li>They must type the token exactly (including dashes) before it refreshes.</li>\r\n                <li>Manual entry still enforces GPS/device/IP restrictions, so only students in your classroom will succeed.</li>\r\n                <li>If a student gets an ‚Äúinvalid/expired token‚Äù error, read the newest token on screen.</li>\r\n              </ol>\r\n              <p style={{marginTop: '10px', color: '#555'}}>\r\n                <strong>Need to run without QR?</strong> You can keep this page open and read out the new token every time it changes. \r\n                Students can keep using manual entry without needing the camera.\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (activeView === 'scan' && user.role === 'student') {\r\n      return <QRScanner user={user} />;\r\n    }\r\n\r\n    if (activeView === 'attendance' && user.role === 'student') {\r\n      return <StudentAttendance user={user} />;\r\n    }\r\n\r\n    return (\r\n      <div className=\"dashboard-welcome\">\r\n        <h2>Welcome to Attendance Management System</h2>\r\n        <p>Select an option from the menu to get started</p>\r\n        {user.role === 'student' && (\r\n          <div style={{marginTop: 20}}>\r\n            <h3 style={{color:'#333', marginBottom: 10}}>Your Subjects Summary</h3>\r\n            <StudentSummary user={user} />\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"dashboard-container\">\r\n      <header className=\"dashboard-header\">\r\n        <div className=\"header-left\">\r\n          <div className=\"logo\">JSSATE BENGALURU</div>\r\n        </div>\r\n        <div className=\"header-right\">\r\n          <div className=\"user-profile\">\r\n            <div className=\"profile-pic\">\r\n              {user.name.charAt(0).toUpperCase()}\r\n            </div>\r\n            <div className=\"profile-info\">\r\n              <div className=\"profile-name\">{user.name}</div>\r\n              {user.role === 'student' && (\r\n                <>\r\n                  <div className=\"profile-id\">{user.student_id || 'Student ID'}</div>\r\n                  <div className=\"profile-course\">{user.course || 'Course'}</div>\r\n                  <div className=\"profile-section\">{user.section || 'Section'}</div>\r\n                </>\r\n              )}\r\n              {user.role === 'teacher' && (\r\n                <div className=\"profile-role\">Teacher</div>\r\n              )}\r\n            </div>\r\n            <button onClick={logout} className=\"logout-btn\">Logout</button>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      <div className=\"dashboard-divider\"></div>\r\n\r\n      <main className=\"dashboard-main\">\r\n        <div className=\"dashboard-grid\">\r\n          {user.role === 'student' ? (\r\n            <>\r\n              <button \r\n                className=\"dashboard-btn btn-1\" \r\n                onClick={() => setActiveView('scan')}\r\n              >\r\n                SCAN QR CODE\r\n              </button>\r\n              <button \r\n                className=\"dashboard-btn btn-2\" \r\n                onClick={() => setActiveView('attendance')}\r\n              >\r\n                MY ATTENDANCE\r\n              </button>\r\n              <button \r\n                className=\"dashboard-btn btn-3\" \r\n                onClick={() => setActiveView('dashboard')}\r\n              >\r\n                DASHBOARD\r\n              </button>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <button \r\n                className=\"dashboard-btn btn-1\" \r\n                onClick={() => setActiveView('qr')}\r\n              >\r\n                GENERATE QR\r\n              </button>\r\n              <button \r\n                className=\"dashboard-btn btn-2\" \r\n                onClick={() => setActiveView('manual')}\r\n              >\r\n                MANUAL ENTRY\r\n              </button>\r\n              <button \r\n                className=\"dashboard-btn btn-3\" \r\n                onClick={() => setActiveView('report')}\r\n              >\r\n                VIEW REPORTS\r\n              </button>\r\n              <button \r\n                className=\"dashboard-btn btn-4\" \r\n                onClick={() => setActiveView('dashboard')}\r\n              >\r\n                DASHBOARD\r\n              </button>\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"main-content\">\r\n          {renderDashboardContent()}\r\n        </div>\r\n      </main>\r\n\r\n      {user.role === 'student' && (\r\n        <button className=\"fab-scan\" onClick={() => setActiveView('scan')}>üì∑ Scan QR</button>\r\n      )}\r\n\r\n      <footer className=\"dashboard-footer\">\r\n        <div className=\"footer-content\">\r\n          <div className=\"footer-left\">\r\n            ¬© Copyright 2025. All Rights Reserved\r\n          </div>\r\n          <div className=\"footer-right\">\r\n            admissions@system.com | 080-28611702\r\n          </div>\r\n        </div>\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}