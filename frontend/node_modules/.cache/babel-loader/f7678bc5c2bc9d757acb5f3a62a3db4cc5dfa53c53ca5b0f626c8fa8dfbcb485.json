{"ast":null,"code":"// Register service worker for PWA functionality\nexport function registerServiceWorker() {\n  if (typeof window === 'undefined' || !('serviceWorker' in navigator)) return;\n  window.addEventListener('load', () => {\n    const base = typeof process !== 'undefined' && process.env && process.env.PUBLIC_URL || '';\n    const swUrl = `${base}/sw.js`;\n    navigator.serviceWorker.register(swUrl).then(registration => {\n      console.log('SW registered: ', registration);\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (!installingWorker) return;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              console.log('New content available; please refresh.');\n              if (typeof window !== 'undefined' && typeof window.confirm === 'function') {\n                if (window.confirm('New version available! Reload to update?')) {\n                  window.location.reload();\n                }\n              }\n            } else {\n              console.log('Content cached for offline use.');\n            }\n          }\n        };\n      };\n    }).catch(error => {\n      console.error('SW registration failed: ', error);\n    });\n  });\n}\nexport function isPWA() {\n  if (typeof window === 'undefined') return false;\n  return window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone || document.referrer.includes('android-app://');\n}\nlet deferredPrompt;\nexport function setInstallPrompt(prompt) {\n  deferredPrompt = prompt;\n}\nexport async function showInstallPrompt() {\n  if (!deferredPrompt) return false;\n  deferredPrompt.prompt();\n  const {\n    outcome\n  } = await deferredPrompt.userChoice;\n  deferredPrompt = null;\n  return outcome === 'accepted';\n}\nexport function listenForInstallPrompt() {\n  if (typeof window === 'undefined') return;\n  window.addEventListener('beforeinstallprompt', e => {\n    e.preventDefault();\n    setInstallPrompt(e);\n    console.log('Install prompt available');\n    return false;\n  });\n}","map":{"version":3,"names":["registerServiceWorker","window","navigator","addEventListener","base","process","env","PUBLIC_URL","swUrl","serviceWorker","register","then","registration","console","log","onupdatefound","installingWorker","installing","onstatechange","state","controller","confirm","location","reload","catch","error","isPWA","matchMedia","matches","standalone","document","referrer","includes","deferredPrompt","setInstallPrompt","prompt","showInstallPrompt","outcome","userChoice","listenForInstallPrompt","e","preventDefault"],"sources":["C:/Users/LENOVO/Downloads/attendance-system-qr/frontend/src/utils/registerServiceWorker.js"],"sourcesContent":["// Register service worker for PWA functionality\r\nexport function registerServiceWorker() {\r\n  if (typeof window === 'undefined' || !('serviceWorker' in navigator)) return;\r\n\r\n  window.addEventListener('load', () => {\r\n    const base = (typeof process !== 'undefined' && process.env && process.env.PUBLIC_URL) || '';\r\n    const swUrl = `${base}/sw.js`;\r\n\r\n    navigator.serviceWorker.register(swUrl)\r\n      .then((registration) => {\r\n        console.log('SW registered: ', registration);\r\n\r\n        registration.onupdatefound = () => {\r\n          const installingWorker = registration.installing;\r\n          if (!installingWorker) return;\r\n\r\n          installingWorker.onstatechange = () => {\r\n            if (installingWorker.state === 'installed') {\r\n              if (navigator.serviceWorker.controller) {\r\n                console.log('New content available; please refresh.');\r\n                if (typeof window !== 'undefined' && typeof window.confirm === 'function') {\r\n                  if (window.confirm('New version available! Reload to update?')) {\r\n                    window.location.reload();\r\n                  }\r\n                }\r\n              } else {\r\n                console.log('Content cached for offline use.');\r\n              }\r\n            }\r\n          };\r\n        };\r\n      })\r\n      .catch((error) => {\r\n        console.error('SW registration failed: ', error);\r\n      });\r\n  });\r\n}\r\n\r\nexport function isPWA() {\r\n  if (typeof window === 'undefined') return false;\r\n  return window.matchMedia('(display-mode: standalone)').matches ||\r\n         window.navigator.standalone ||\r\n         document.referrer.includes('android-app://');\r\n}\r\n\r\nlet deferredPrompt;\r\n\r\nexport function setInstallPrompt(prompt) { deferredPrompt = prompt; }\r\n\r\nexport async function showInstallPrompt() {\r\n  if (!deferredPrompt) return false;\r\n  deferredPrompt.prompt();\r\n  const { outcome } = await deferredPrompt.userChoice;\r\n  deferredPrompt = null;\r\n  return outcome === 'accepted';\r\n}\r\n\r\nexport function listenForInstallPrompt() {\r\n  if (typeof window === 'undefined') return;\r\n  window.addEventListener('beforeinstallprompt', (e) => {\r\n    e.preventDefault();\r\n    setInstallPrompt(e);\r\n    console.log('Install prompt available');\r\n    return false;\r\n  });\r\n}\r\n"],"mappings":"AAAA;AACA,OAAO,SAASA,qBAAqBA,CAAA,EAAG;EACtC,IAAI,OAAOC,MAAM,KAAK,WAAW,IAAI,EAAE,eAAe,IAAIC,SAAS,CAAC,EAAE;EAEtED,MAAM,CAACE,gBAAgB,CAAC,MAAM,EAAE,MAAM;IACpC,MAAMC,IAAI,GAAI,OAAOC,OAAO,KAAK,WAAW,IAAIA,OAAO,CAACC,GAAG,IAAID,OAAO,CAACC,GAAG,CAACC,UAAU,IAAK,EAAE;IAC5F,MAAMC,KAAK,GAAG,GAAGJ,IAAI,QAAQ;IAE7BF,SAAS,CAACO,aAAa,CAACC,QAAQ,CAACF,KAAK,CAAC,CACpCG,IAAI,CAAEC,YAAY,IAAK;MACtBC,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEF,YAAY,CAAC;MAE5CA,YAAY,CAACG,aAAa,GAAG,MAAM;QACjC,MAAMC,gBAAgB,GAAGJ,YAAY,CAACK,UAAU;QAChD,IAAI,CAACD,gBAAgB,EAAE;QAEvBA,gBAAgB,CAACE,aAAa,GAAG,MAAM;UACrC,IAAIF,gBAAgB,CAACG,KAAK,KAAK,WAAW,EAAE;YAC1C,IAAIjB,SAAS,CAACO,aAAa,CAACW,UAAU,EAAE;cACtCP,OAAO,CAACC,GAAG,CAAC,wCAAwC,CAAC;cACrD,IAAI,OAAOb,MAAM,KAAK,WAAW,IAAI,OAAOA,MAAM,CAACoB,OAAO,KAAK,UAAU,EAAE;gBACzE,IAAIpB,MAAM,CAACoB,OAAO,CAAC,0CAA0C,CAAC,EAAE;kBAC9DpB,MAAM,CAACqB,QAAQ,CAACC,MAAM,CAAC,CAAC;gBAC1B;cACF;YACF,CAAC,MAAM;cACLV,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC;YAChD;UACF;QACF,CAAC;MACH,CAAC;IACH,CAAC,CAAC,CACDU,KAAK,CAAEC,KAAK,IAAK;MAChBZ,OAAO,CAACY,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;IAClD,CAAC,CAAC;EACN,CAAC,CAAC;AACJ;AAEA,OAAO,SAASC,KAAKA,CAAA,EAAG;EACtB,IAAI,OAAOzB,MAAM,KAAK,WAAW,EAAE,OAAO,KAAK;EAC/C,OAAOA,MAAM,CAAC0B,UAAU,CAAC,4BAA4B,CAAC,CAACC,OAAO,IACvD3B,MAAM,CAACC,SAAS,CAAC2B,UAAU,IAC3BC,QAAQ,CAACC,QAAQ,CAACC,QAAQ,CAAC,gBAAgB,CAAC;AACrD;AAEA,IAAIC,cAAc;AAElB,OAAO,SAASC,gBAAgBA,CAACC,MAAM,EAAE;EAAEF,cAAc,GAAGE,MAAM;AAAE;AAEpE,OAAO,eAAeC,iBAAiBA,CAAA,EAAG;EACxC,IAAI,CAACH,cAAc,EAAE,OAAO,KAAK;EACjCA,cAAc,CAACE,MAAM,CAAC,CAAC;EACvB,MAAM;IAAEE;EAAQ,CAAC,GAAG,MAAMJ,cAAc,CAACK,UAAU;EACnDL,cAAc,GAAG,IAAI;EACrB,OAAOI,OAAO,KAAK,UAAU;AAC/B;AAEA,OAAO,SAASE,sBAAsBA,CAAA,EAAG;EACvC,IAAI,OAAOtC,MAAM,KAAK,WAAW,EAAE;EACnCA,MAAM,CAACE,gBAAgB,CAAC,qBAAqB,EAAGqC,CAAC,IAAK;IACpDA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClBP,gBAAgB,CAACM,CAAC,CAAC;IACnB3B,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;IACvC,OAAO,KAAK;EACd,CAAC,CAAC;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}