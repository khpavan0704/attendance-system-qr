{"ast":null,"code":"// Register service worker for PWA functionality\nexport function registerServiceWorker(){if(typeof window==='undefined'||!('serviceWorker'in navigator))return;window.addEventListener('load',()=>{const base=typeof process!=='undefined'&&process.env&&process.env.PUBLIC_URL||'';const swUrl=\"\".concat(base,\"/sw.js\");navigator.serviceWorker.register(swUrl).then(registration=>{console.log('SW registered: ',registration);registration.onupdatefound=()=>{const installingWorker=registration.installing;if(!installingWorker)return;installingWorker.onstatechange=()=>{if(installingWorker.state==='installed'){if(navigator.serviceWorker.controller){console.log('New content available; please refresh.');if(typeof window!=='undefined'&&typeof window.confirm==='function'){if(window.confirm('New version available! Reload to update?')){window.location.reload();}}}else{console.log('Content cached for offline use.');}}};};}).catch(error=>{console.error('SW registration failed: ',error);});});}export function isPWA(){if(typeof window==='undefined')return false;return window.matchMedia('(display-mode: standalone)').matches||window.navigator.standalone||document.referrer.includes('android-app://');}let deferredPrompt;export function setInstallPrompt(prompt){deferredPrompt=prompt;}export async function showInstallPrompt(){if(!deferredPrompt)return false;deferredPrompt.prompt();const{outcome}=await deferredPrompt.userChoice;deferredPrompt=null;return outcome==='accepted';}export function listenForInstallPrompt(){if(typeof window==='undefined')return;window.addEventListener('beforeinstallprompt',e=>{e.preventDefault();setInstallPrompt(e);console.log('Install prompt available');return false;});}","map":{"version":3,"names":["registerServiceWorker","window","navigator","addEventListener","base","process","env","PUBLIC_URL","swUrl","concat","serviceWorker","register","then","registration","console","log","onupdatefound","installingWorker","installing","onstatechange","state","controller","confirm","location","reload","catch","error","isPWA","matchMedia","matches","standalone","document","referrer","includes","deferredPrompt","setInstallPrompt","prompt","showInstallPrompt","outcome","userChoice","listenForInstallPrompt","e","preventDefault"],"sources":["C:/Users/LENOVO/Downloads/attendance-system-qr/frontend/src/utils/registerServiceWorker.js"],"sourcesContent":["// Register service worker for PWA functionality\r\nexport function registerServiceWorker() {\r\n  if (typeof window === 'undefined' || !('serviceWorker' in navigator)) return;\r\n\r\n  window.addEventListener('load', () => {\r\n    const base = (typeof process !== 'undefined' && process.env && process.env.PUBLIC_URL) || '';\r\n    const swUrl = `${base}/sw.js`;\r\n\r\n    navigator.serviceWorker.register(swUrl)\r\n      .then((registration) => {\r\n        console.log('SW registered: ', registration);\r\n\r\n        registration.onupdatefound = () => {\r\n          const installingWorker = registration.installing;\r\n          if (!installingWorker) return;\r\n\r\n          installingWorker.onstatechange = () => {\r\n            if (installingWorker.state === 'installed') {\r\n              if (navigator.serviceWorker.controller) {\r\n                console.log('New content available; please refresh.');\r\n                if (typeof window !== 'undefined' && typeof window.confirm === 'function') {\r\n                  if (window.confirm('New version available! Reload to update?')) {\r\n                    window.location.reload();\r\n                  }\r\n                }\r\n              } else {\r\n                console.log('Content cached for offline use.');\r\n              }\r\n            }\r\n          };\r\n        };\r\n      })\r\n      .catch((error) => {\r\n        console.error('SW registration failed: ', error);\r\n      });\r\n  });\r\n}\r\n\r\nexport function isPWA() {\r\n  if (typeof window === 'undefined') return false;\r\n  return window.matchMedia('(display-mode: standalone)').matches ||\r\n         window.navigator.standalone ||\r\n         document.referrer.includes('android-app://');\r\n}\r\n\r\nlet deferredPrompt;\r\n\r\nexport function setInstallPrompt(prompt) { deferredPrompt = prompt; }\r\n\r\nexport async function showInstallPrompt() {\r\n  if (!deferredPrompt) return false;\r\n  deferredPrompt.prompt();\r\n  const { outcome } = await deferredPrompt.userChoice;\r\n  deferredPrompt = null;\r\n  return outcome === 'accepted';\r\n}\r\n\r\nexport function listenForInstallPrompt() {\r\n  if (typeof window === 'undefined') return;\r\n  window.addEventListener('beforeinstallprompt', (e) => {\r\n    e.preventDefault();\r\n    setInstallPrompt(e);\r\n    console.log('Install prompt available');\r\n    return false;\r\n  });\r\n}\r\n"],"mappings":"AAAA;AACA,MAAO,SAAS,CAAAA,qBAAqBA,CAAA,CAAG,CACtC,GAAI,MAAO,CAAAC,MAAM,GAAK,WAAW,EAAI,EAAE,eAAe,EAAI,CAAAC,SAAS,CAAC,CAAE,OAEtED,MAAM,CAACE,gBAAgB,CAAC,MAAM,CAAE,IAAM,CACpC,KAAM,CAAAC,IAAI,CAAI,MAAO,CAAAC,OAAO,GAAK,WAAW,EAAIA,OAAO,CAACC,GAAG,EAAID,OAAO,CAACC,GAAG,CAACC,UAAU,EAAK,EAAE,CAC5F,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAML,IAAI,UAAQ,CAE7BF,SAAS,CAACQ,aAAa,CAACC,QAAQ,CAACH,KAAK,CAAC,CACpCI,IAAI,CAAEC,YAAY,EAAK,CACtBC,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAEF,YAAY,CAAC,CAE5CA,YAAY,CAACG,aAAa,CAAG,IAAM,CACjC,KAAM,CAAAC,gBAAgB,CAAGJ,YAAY,CAACK,UAAU,CAChD,GAAI,CAACD,gBAAgB,CAAE,OAEvBA,gBAAgB,CAACE,aAAa,CAAG,IAAM,CACrC,GAAIF,gBAAgB,CAACG,KAAK,GAAK,WAAW,CAAE,CAC1C,GAAIlB,SAAS,CAACQ,aAAa,CAACW,UAAU,CAAE,CACtCP,OAAO,CAACC,GAAG,CAAC,wCAAwC,CAAC,CACrD,GAAI,MAAO,CAAAd,MAAM,GAAK,WAAW,EAAI,MAAO,CAAAA,MAAM,CAACqB,OAAO,GAAK,UAAU,CAAE,CACzE,GAAIrB,MAAM,CAACqB,OAAO,CAAC,0CAA0C,CAAC,CAAE,CAC9DrB,MAAM,CAACsB,QAAQ,CAACC,MAAM,CAAC,CAAC,CAC1B,CACF,CACF,CAAC,IAAM,CACLV,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC,CAChD,CACF,CACF,CAAC,CACH,CAAC,CACH,CAAC,CAAC,CACDU,KAAK,CAAEC,KAAK,EAAK,CAChBZ,OAAO,CAACY,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAClD,CAAC,CAAC,CACN,CAAC,CAAC,CACJ,CAEA,MAAO,SAAS,CAAAC,KAAKA,CAAA,CAAG,CACtB,GAAI,MAAO,CAAA1B,MAAM,GAAK,WAAW,CAAE,MAAO,MAAK,CAC/C,MAAO,CAAAA,MAAM,CAAC2B,UAAU,CAAC,4BAA4B,CAAC,CAACC,OAAO,EACvD5B,MAAM,CAACC,SAAS,CAAC4B,UAAU,EAC3BC,QAAQ,CAACC,QAAQ,CAACC,QAAQ,CAAC,gBAAgB,CAAC,CACrD,CAEA,GAAI,CAAAC,cAAc,CAElB,MAAO,SAAS,CAAAC,gBAAgBA,CAACC,MAAM,CAAE,CAAEF,cAAc,CAAGE,MAAM,CAAE,CAEpE,MAAO,eAAe,CAAAC,iBAAiBA,CAAA,CAAG,CACxC,GAAI,CAACH,cAAc,CAAE,MAAO,MAAK,CACjCA,cAAc,CAACE,MAAM,CAAC,CAAC,CACvB,KAAM,CAAEE,OAAQ,CAAC,CAAG,KAAM,CAAAJ,cAAc,CAACK,UAAU,CACnDL,cAAc,CAAG,IAAI,CACrB,MAAO,CAAAI,OAAO,GAAK,UAAU,CAC/B,CAEA,MAAO,SAAS,CAAAE,sBAAsBA,CAAA,CAAG,CACvC,GAAI,MAAO,CAAAvC,MAAM,GAAK,WAAW,CAAE,OACnCA,MAAM,CAACE,gBAAgB,CAAC,qBAAqB,CAAGsC,CAAC,EAAK,CACpDA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBP,gBAAgB,CAACM,CAAC,CAAC,CACnB3B,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC,CACvC,MAAO,MAAK,CACd,CAAC,CAAC,CACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}